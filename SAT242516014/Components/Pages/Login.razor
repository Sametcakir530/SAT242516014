@page "/Login"
@* Sayfanın adresi AYNI KALIYOR *@

@using SAT242516014.Components.Account.Shared
@using SAT242516014.Components.Layout
@layout AccountLayout
@inject NavigationManager NavManager

<div class="card shadow-lg border-0 rounded-3">
    <div class="card-header bg-primary text-white text-center py-4">
        <h3 class="m-0 fw-bold">Giriş Yap</h3>
    </div>
    <div class="card-body p-5">

        @if (!string.IsNullOrEmpty(ErrorMessage))
        {
            <div class="alert alert-danger">@ErrorMessage</div>
        }

        @* --- DÜZELTME BURADA --- *@
        @* Form artık "Login" adresine değil, "PerformLogin" adresine gidecek *@

        <form action="/Account/PerformLogin" method="get">

            <input type="hidden" name="returnUrl" value="@ReturnUrl" />

            <div class="mb-4">
                <label class="form-label">Email</label>
                <input type="text" name="email" class="form-control" required />
            </div>

            <div class="mb-4">
                <label class="form-label">Şifre</label>
                <input type="password" name="password" class="form-control" required />
            </div>

            <button type="submit" class="btn btn-primary w-100">Giriş Yap</button>
        </form>

    </div>
</div>

@code {
    [SupplyParameterFromQuery] public string? Error { get; set; }
    [SupplyParameterFromQuery] public string? ReturnUrl { get; set; } = "/";
    private string? ErrorMessage => Error == "Gecersiz" ? "Hatalı Giriş" : null;
}